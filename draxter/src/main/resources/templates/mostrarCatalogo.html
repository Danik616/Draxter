<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
>
  <head th:replace="/fragments/head :: head"></head>

  <body>
    <div th:replace="/fragments/navbar :: navbar"></div>

    <div sec:authorize="!hasRole('ADMIN')" class="pb-50">
      <div
        id="carouselExampleIndicators"
        class="carousel slide"
        data-ride="carousel"
      >
        <ol class="carousel-indicators">
          <li
            data-target="#carouselExampleIndicators"
            data-slide-to="0"
            class="active"
          ></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img
              class="d-block w-100"
              th:src="@{'/assets/img/Draxter-slider-1.jpg'}"
              th:alt="Draxter-slider-2.jpg"
            />
            <div class="carousel-caption d-none d-md-block text-dark">
              <h5>First slide label</h5>
              <p>
                Some representative placeholder content for the first slide.
              </p>
            </div>
          </div>
          <div class="carousel-item">
            <img
              class="d-block w-100"
              th:src="@{'/assets/img/Draxter-slider-2.jpg'}"
              th:alt="Draxter-slider-2.jpg"
            />
            <div class="carousel-caption d-none d-md-block">
              <h5>Second slide label</h5>
              <p>
                Some representative placeholder content for the first slide.
              </p>
            </div>
          </div>
          <div class="carousel-item">
            <img
              class="d-block w-100"
              th:src="@{'/assets/img/Draxter-slider-2.jpg'}"
              th:alt="Draxter-slider-2.jpg"
            />
            <div class="carousel-caption d-none d-md-block">
              <h5>Third slide label</h5>
              <p>
                Some representative placeholder content for the first slide.
              </p>
            </div>
          </div>
        </div>
        <a
          class="carousel-control-prev"
          href="#carouselExampleIndicators"
          role="button"
          data-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a
          class="carousel-control-next"
          href="#carouselExampleIndicators"
          role="button"
          data-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

      <section class="products-area pt-60 pb-60">
        <div class="container">
          <div class="tab products-category-tab">
            <div class="title">
              <h2><span class="dot"></span> Mejores productos</h2>
            </div>
            <ul class="tabs active">
              <li>
                <a class="" th:href="@{/catalogo}" href="#">Todo</a>
              </li>
              <li>
                <a
                  class=""
                  th:href="@{/catalogo (filtro=${'MASCULINA'})}"
                  href="#"
                  >Hombre</a
                >
              </li>
              <li>
                <a
                  class=""
                  th:href="@{/catalogo (filtro=${'FEMENINA'})}"
                  href="#"
                  >Mujer</a
                >
              </li>
              <li>
                <a class="" th:href="@{/catalogo (filtro=${'UNISEX'})}" href="#"
                  >Unisex</a
                >
              </li>
            </ul>

            <div class="tab_content">
              <div class="tab_item">
                <div class="row">
                  <div
                    th:each="producto: ${productos}"
                    class="col-lg-3 col-md-6 col-sm-6"
                  >
                    <div class="single-product-item gr">
                      <div class="product_image">
                        <a href="#">
                          <img
                            th:src="@{'/assets/img/' + ${producto.imagen}}"
                            th:alt="${producto.imagen}"
                          />
                        </a>
                      </div>
                      <div class="product-content">
                        <h3>
                          <a href="#" th:text="*{producto.nombre}"
                            >Nombre Producto</a
                          >
                        </h3>
                        <div class="product-price">
                          <span class="new-price"
                            >$<span
                              th:text="*{producto.precio}"
                              class="new-price"
                              >191.00</span
                            ></span
                          >
                        </div>
                        <div class="row align-item-end">
                          <div class="col-lg-7 col-md-6 col-7">
                            <a
                              sec:authorize="isAuthenticated()"
                              class="btn btn-light"
                              type="button"
                              th:href="@{carrito/{id}(id=${producto.id})}"
                              href="#"
                              >Añadir al carrito</a
                            >
                            <a
                              sec:authorize="!isAuthenticated()"
                              data-toggle="modal"
                              data-target="#signUp"
                              type="button"
                              href="#"
                              class="btn btn-light"
                              >Añadir al carrito</a
                            >
                          </div>
                          <div class="col-lg-5 col-md-6 col-5">
                            <ul>
                              <li>
                                <a
                                  th:href="@{/catalogo/{id} (id=${producto.id})}"
                                  title="Vista Rápida"
                                  class="link-details"
                                >
                                  <i class="far fa-eye"> </i
                                ></a>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div
        class="alert alert-success"
        role="alert"
        th:if="${carritoGuardado != null}"
      >
        <p style="color: aliceblue" th:text="${carritoGuardado}"></p>
      </div>

      <div
        class="alert alert-success"
        role="alert"
        th:if="${carritoNoGuardado != null}"
      >
        <p style="color: aliceblue" th:text="${carritoNoGuardado}"></p>
      </div>
    </div>
    <div th:replace="/fragments/signUp :: signUp"></div>

    <div
      sec:authorize="hasRole('ADMIN')"
      style="
        height: auto;
        background: var(--bs-body-color);
        padding-top: 50px;
        padding-bottom: 50px;
      "
    >
      <div
        class="d-flex"
        style="
          background: var(--bs-body-color);
          width: 90%;
          margin-right: 5%;
          margin-left: 5%;
          height: 200px;
          margin-top: 60px;
        "
        th:each="producto: ${productos}"
      >
        <div
          class="text-center"
          style="width: 25%; height: 100%; text-align: center"
        >
          <div
            style="
              width: 150px;
              height: 150px;
              margin-right: 31px;
              margin-left: 31px;
            "
          >
            <img
              style="width: 100%; height: 100%"
              th:src="@{'/assets/img/' + ${producto.imagen}}"
              th:alt="${producto.imagen}"
            />
            <h5
              style="
                color: var(--bs-white);
                margin-top: 10px;
                text-align: center;
              "
              th:text="*{producto.nombre}"
            ></h5>
          </div>
        </div>
        <div class="d-inline" style="width: 75%; height: 100%">
          <div style="width: 100%; height: 60%">
            <p th:text="*{producto.descripcion}" style="color: var(--bs-white)">
              It is a long established fact that a reader will be distracted by
              the readable content of a page when looking at its layout. The
              point of using Lorem Ipsum is that it has a more-or-less normal
              distribution of letters, as opposed to using 'Content here,
              content here', making it look like readable English.&nbsp;<br />
            </p>
          </div>
          <div style="height: 40%; width: 100%">
            <h3 style="color: var(--bs-white)">
              $ <span th:text="*{producto.precio}"></span>
            </h3>
            <a
              class="btn btn-primary"
              type="button"
              style="margin-left: 250px"
              th:href="@{/servicios/monitorearProductos/{id}(id=${producto.id})}"
            >
              Eliminar
            </a>
            <a
              class="btn btn-primary"
              type="button"
              style="margin-left: 250px"
              th:href="@{/servicios/monitorearProductos/editar/{id} (id=${producto.id})}"
            >
              Editar
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="modal productQuickView" tabindex="-1" id="productQuickView">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content"></div>
      </div>
    </div>

    <footer th:replace="/fragments/footer :: footer"></footer>

    <script>
      $(document).ready(function () {
        $(".link-details").on("click", function (e) {
          e.preventDefault();
          $("#productQuickView")
            .modal("show")
            .find(".modal-content")
            .load($(this).attr("href"));
        });
      });
    </script>
    <script
      src="assets/JQuery/jquery.min.js"
      th:src="@{/assets/JQuery/jquery.min.js}"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js}"
    ></script>
    <script th:replace=" /fragments/scriptActive :: scriptActive"></script>
  </body>
</html>
